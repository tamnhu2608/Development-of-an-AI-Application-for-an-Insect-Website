{% extends "template_v2.html" %}
{% load custom_filters %}
{% block content %}
<div class="container py-3">
    <h2></h2>
    <div class="d-flex justify-content-center">
        <p class="fw-bold fs-2">Xét duyệt đề xuất côn trùng</p>
    </div>
    <div>
        <hr>
    </div>
    <table class="table table-bordered table-striped">
        <thead class="table-dark">
            <tr align="center">
                <th scope="col">#</th>
                <th scope="col">Hình ảnh</th>
                <th scope="col">Tên khoa học</th>
                <th scope="col">Tên Tiếng Việt</th>
                <th scope="col">Người dùng</th>
                <th scope="col">Ngày gửi</th>
                <th scope="col">Trạng thái</th>
                <th scope="col">Hành động</th>
            </tr>
        </thead>
        <tbody>
        {% if requests %}
            {% for request in requests %}
            <tr align="center">
                <td>{{ forloop.counter }}</td>
                <td>
                    <img src="{{ MEDIA_URL }}{{ request.thumbnail }}" class="img-thumbnail" alt="Ảnh côn trùng" style="width: 100px; height: auto;">
                </td>
                <td>{{ request.ename }}</td>
                <td>{{ request.vi_name }}</td>
                <td>
                    {% if request.user.first_name or request.user.last_name %}
                        {{ request.user.last_name }} {{ request.user.first_name }}
                    {% else %}
                        {{ request.user.username }}
                    {% endif %}
                </td>
                <td>{{ request.created_at|date:"Y-m-d H:i:s" }}</td>
                <td>
                    <span class="badge bg-warning text-dark">
                        {{ request.status|format_status }}
                    </span>
                </td>
                <td>
                    <a href="{% url 'verify_request' request.request_id %}" class="btn btn-outline-success d-inline-flex align-items-center justify-content-center">
                        <i class="bi bi-clipboard-check"></i>
                    </a>
                </td>
            </tr>
            {% endfor %}
         {%else%}
            <tr>
                <td colspan="8"  style="text-align: center;">
                    Danh sách trống...
                </td>
            </tr>
        {%endif%}
        </tbody>
    </table>
</div>
{% endblock %}